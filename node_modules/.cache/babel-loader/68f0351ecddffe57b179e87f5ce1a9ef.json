{"ast":null,"code":"var _jsxFileName = \"/home/rahul/Projects/auction/ipl-auction/src/container/SilentBidding/SilentBiddingHelper.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\"; // import { Bids } from \"../../store/actions/playerActions\";\n\nimport { connect } from \"react-redux\";\nimport firebase from \"firebase\";\nimport { withStyles, makeStyles } from \"@material-ui/core/styles\";\nimport { TableCell, TableRow } from \"@material-ui/core\";\nimport { db } from \"../../config/Firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledTableCell = withStyles(theme => ({\n  head: {\n    backgroundColor: theme.palette.common.black,\n    color: theme.palette.common.white\n  },\n  body: {\n    fontSize: 14\n  }\n}))(TableCell);\nconst StyledTableRow = withStyles(theme => ({\n  root: {\n    \"&:nth-of-type(odd)\": {\n      backgroundColor: theme.palette.action.hover\n    }\n  }\n}))(TableRow);\n\nconst SilentBiddingHelper = ({\n  player,\n  playerId,\n  teamId\n}) => {\n  _s();\n\n  const [biddingValue, setbiddingValue] = useState(0);\n  console.log(player);\n\n  const sendBid = e => {\n    e.preventDefault();\n    db.collection(\"players\").doc(player.name).collection(\"Bids\").doc(teamId).set({\n      bid: [{\n        biddingprice: biddingValue,\n        timestamp: firebase.firestore.Timestamp.now()\n      }]\n    });\n    console.log(\"Maxbid:\", player.maxbid);\n    console.log(\"Price:\", biddingValue);\n\n    if (parseInt(player.maxbid) < parseInt(biddingValue)) {\n      db.collection(\"players\").doc(player.name).update({\n        maxbid: biddingValue,\n        maxbidBy: teamId\n      });\n    }\n\n    window.location.reload(true);\n  };\n\n  useEffect(() => {\n    if (player.status === \"close\") {\n      db.collection(\"players\").doc(player.name).update({\n        team: player.maxbidBy\n      });\n      const ref3 = db.collection(\"users\").doc(player.maxbidBy);\n      ref3.onSnapshot(snapshot => {\n        if (snapshot.exists) {\n          snapshot.docs.map(doc => {\n            ref3.update({\n              teamBalance: parseInt(doc.data().teamBalance) - parseInt(player.maxbid)\n            });\n          });\n        }\n      });\n    }\n  }, [player.status]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(StyledTableRow, {\n      children: [/*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.Runs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.Batavg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.strikerate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.wickets\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.Bowlavg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.economy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.baseprice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: player.maxbid\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledTableCell, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: sendBid,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: biddingValue,\n            onChange: event => {\n              event.preventDefault();\n              setbiddingValue(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\"\n            /* onClick={(event) => {\n            event.preventDefault();\n            Bids(playerId, nextBid);\n            }} */\n            ,\n            children: \"Bid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(SilentBiddingHelper, \"yxaigzt9JiyBsfY3sNougvW03bQ=\");\n\n_c = SilentBiddingHelper;\n\nconst mapStateToProps = state => {\n  return {\n    authError: state.auth.authError,\n    auth: state.firebase.auth,\n    playerB: state.playerB\n  };\n};\n/* const mapDispatchToProps = (dispatch) => {\n  return {\n    Bids: (playerId, biddingprice) => dispatch(Bids(playerId, biddingprice)),\n  };\n}; */\n\n\nexport default connect(mapStateToProps)(SilentBiddingHelper);\n\nvar _c;\n\n$RefreshReg$(_c, \"SilentBiddingHelper\");","map":{"version":3,"sources":["/home/rahul/Projects/auction/ipl-auction/src/container/SilentBidding/SilentBiddingHelper.js"],"names":["React","useEffect","useState","connect","firebase","withStyles","makeStyles","TableCell","TableRow","db","StyledTableCell","theme","head","backgroundColor","palette","common","black","color","white","body","fontSize","StyledTableRow","root","action","hover","SilentBiddingHelper","player","playerId","teamId","biddingValue","setbiddingValue","console","log","sendBid","e","preventDefault","collection","doc","name","set","bid","biddingprice","timestamp","firestore","Timestamp","now","maxbid","parseInt","update","maxbidBy","window","location","reload","status","team","ref3","onSnapshot","snapshot","exists","docs","map","teamBalance","data","Runs","Batavg","strikerate","wickets","Bowlavg","economy","baseprice","event","target","value","mapStateToProps","state","authError","auth","playerB"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n// import { Bids } from \"../../store/actions/playerActions\";\nimport { connect } from \"react-redux\";\nimport firebase from \"firebase\";\n\nimport { withStyles, makeStyles } from \"@material-ui/core/styles\";\nimport { TableCell, TableRow } from \"@material-ui/core\";\nimport { db } from \"../../config/Firebase\";\n\nconst StyledTableCell = withStyles((theme) => ({\n  head: {\n    backgroundColor: theme.palette.common.black,\n    color: theme.palette.common.white,\n  },\n  body: {\n    fontSize: 14,\n  },\n}))(TableCell);\n\nconst StyledTableRow = withStyles((theme) => ({\n  root: {\n    \"&:nth-of-type(odd)\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n}))(TableRow);\n\nconst SilentBiddingHelper = ({ player, playerId, teamId }) => {\n  const [biddingValue, setbiddingValue] = useState(0);\n  console.log(player);\n  const sendBid = (e) => {\n    e.preventDefault();\n    db.collection(\"players\")\n      .doc(player.name)\n      .collection(\"Bids\")\n      .doc(teamId)\n      .set({\n        bid: [\n          {\n            biddingprice: biddingValue,\n            timestamp: firebase.firestore.Timestamp.now(),\n          },\n        ],\n      });\n    console.log(\"Maxbid:\", player.maxbid);\n    console.log(\"Price:\", biddingValue);\n    if (parseInt(player.maxbid) < parseInt(biddingValue)) {\n      db.collection(\"players\").doc(player.name).update({\n        maxbid: biddingValue,\n        maxbidBy: teamId,\n      });\n    }\n\n    window.location.reload(true);\n  };\n  useEffect(() => {\n    if (player.status === \"close\") {\n      db.collection(\"players\").doc(player.name).update({\n        team: player.maxbidBy,\n      });\n      const ref3 = db.collection(\"users\").doc(player.maxbidBy);\n\n      ref3.onSnapshot((snapshot) => {\n        if (snapshot.exists) {\n          snapshot.docs.map((doc) => {\n            ref3.update({\n              teamBalance:\n                parseInt(doc.data().teamBalance) - parseInt(player.maxbid),\n            });\n          });\n        }\n      });\n    }\n  }, [player.status]);\n  return (\n    <>\n      <StyledTableRow>\n        <StyledTableCell>{player.name}</StyledTableCell>\n        <StyledTableCell>{player.Runs}</StyledTableCell>\n        <StyledTableCell>{player.Batavg}</StyledTableCell>\n        <StyledTableCell>{player.strikerate}</StyledTableCell>\n        <StyledTableCell>{player.wickets}</StyledTableCell>\n        <StyledTableCell>{player.Bowlavg}</StyledTableCell>\n        <StyledTableCell>{player.economy}</StyledTableCell>\n        <StyledTableCell>{player.baseprice}</StyledTableCell>\n        <StyledTableCell>{player.maxbid}</StyledTableCell>\n        <StyledTableCell>\n          <form onSubmit={sendBid}>\n            <input\n              value={biddingValue}\n              onChange={(event) => {\n                event.preventDefault();\n                setbiddingValue(event.target.value);\n              }}\n            />\n            <button\n              type=\"submit\"\n              /* onClick={(event) => {\n              event.preventDefault();\n              Bids(playerId, nextBid);\n            }} */\n            >\n              Bid\n            </button>\n          </form>\n        </StyledTableCell>\n      </StyledTableRow>\n    </>\n  );\n};\nconst mapStateToProps = (state) => {\n  return {\n    authError: state.auth.authError,\n    auth: state.firebase.auth,\n    playerB: state.playerB,\n  };\n};\n\n/* const mapDispatchToProps = (dispatch) => {\n  return {\n    Bids: (playerId, biddingprice) => dispatch(Bids(playerId, biddingprice)),\n  };\n}; */\nexport default connect(mapStateToProps)(SilentBiddingHelper);\n"]},"metadata":{},"sourceType":"module"}